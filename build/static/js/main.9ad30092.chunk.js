(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var c=t(15),o=t.n(c),a=t(3),u=t(1),r=t(4),i=t.n(r),l="/api/persons",s=function(){return i.a.get(l)},d=function(e){return i.a.post(l,e)},b=function(e){return i.a.delete("".concat(l,"/").concat(e))},j=function(e,n){return i.a.put("".concat(l,"/").concat(e.id),{name:e.name,number:n,id:e.id})},h=t(0),f=function(e){var n=e.searchFilter,t=e.currentList,c=e.deletePerson;return(""===n.trim()?t:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))).map((function(e){return Object(h.jsxs)("p",{children:[e.name," ",e.number," ",Object(h.jsx)("button",{name:e.name,id:e.id,onClick:c,children:"Delete"},e.id)]},e.name)}))},m=function(e){var n=e.value,t=e.onChange;return Object(h.jsxs)("div",{children:["Filter: ",Object(h.jsx)("input",{value:n,onChange:t})]})},O=function(e){return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:e.submit,children:[Object(h.jsxs)("div",{children:["Name: ",Object(h.jsx)("input",{value:e.nameValue,onChange:e.nameChange})]}),Object(h.jsxs)("div",{children:["Number: ",Object(h.jsx)("input",{value:e.numberValue,onChange:e.numberChage})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})})},g=t(5),p=function(e){var n=e.message,t=e.operationSuccess,c={padding:10,borderStyle:"solid",borderRadius:4,fontSize:20};if(null===n)return null;if(t){var o=Object(g.a)(Object(g.a)({},c),{background:"lightgreen"});return Object(h.jsx)("div",{style:o,children:n})}var a=Object(g.a)(Object(g.a)({},c),{background:"LightCoral"});return Object(h.jsx)("div",{style:a,children:n})},v=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(u.useState)(""),r=Object(a.a)(o,2),i=r[0],l=r[1],g=Object(u.useState)(""),v=Object(a.a)(g,2),x=v[0],w=v[1],C=Object(u.useState)(""),S=Object(a.a)(C,2),k=S[0],y=S[1],P=Object(u.useState)(null),T=Object(a.a)(P,2),L=T[0],V=T[1],D=Object(u.useState)(null),F=Object(a.a)(D,2),I=F[0],N=F[1];Object(u.useEffect)((function(){s().then((function(e){c(e.data)}))}),[]);var E=function(){s().then((function(e){c(e.data)}))},J=function(e){window.confirm("".concat(e.name," is already added to phonebook. Replace the old number with the new one?"))&&j(e,x).then((function(){E(),l(""),w(""),V("Person's '".concat(i,"' number was changed to '").concat(x,"'.")),N(!0),setTimeout((function(){V(null),N(null)}),5e3)})).catch((function(){E(),V("Information of '".concat(i,"' cannot be found in the phonebook.")),N(!1),setTimeout((function(){V(null),N(null)}),5e3)}))};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Phonebook"}),Object(h.jsx)(p,{message:L,operationSuccess:I}),Object(h.jsx)("h3",{children:"Search"}),Object(h.jsx)(m,{value:k,onChange:function(e){y(e.target.value)}}),Object(h.jsx)("h3",{children:"Add new entry"}),Object(h.jsx)(O,{nameValue:i,nameChange:function(e){l(e.target.value)},numberValue:x,numberChage:function(e){w(e.target.value)},submit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===i}));void 0!==n?(console.log(n),J(n)):d({name:i,number:x}).then((function(e){l(""),w(""),c(t.concat(e.data)),V("Person '".concat(i,"' was added to the phonebook.")),N(!0),setTimeout((function(){V(null),N(null)}),5e3)})).catch((function(e){E(),V(e.response.data.error),N(!1),setTimeout((function(){V(null),N(null)}),5e3)}))}}),Object(h.jsx)("h3",{children:"Numbers"}),Object(h.jsx)(f,{searchFilter:k,currentList:t,deletePerson:function(e){window.confirm("Delete ".concat(e.target.name,"?"))&&b(e.target.id).then((function(){E(),V("Person '".concat(e.target.name,"' was deleted from the phonebook.")),N(!0),setTimeout((function(){V(null),N(null)}),5e3)})).catch((function(){E(),V("Information of '".concat(e.target.name,"' cannot be found in the phonebook or was already removed.")),N(!1),setTimeout((function(){V(null),N(null)}),5e3)}))}})]})};o.a.render(Object(h.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.9ad30092.chunk.js.map